# ============================================
# Koda Environment Variables
# ============================================
#
# QUICK START: Copy this file to .env and fill in the API keys.
#
# DEPLOYMENT MODES:
#
#   LOCAL (default)          CLOUD
#   ─────────────────        ─────────────────
#   DB: SQLite file          DB: Turso
#   Assets: ./data/          Assets: Cloudflare R2
#   Sandbox: Docker          Sandbox: E2B
#   Snapshots: ./data/       Snapshots: R2
#
# You can mix: e.g. local DB + cloud assets, Docker sandbox + R2 snapshots

# ============================================
# AI API KEYS
# ============================================
ANTHROPIC_API_KEY=
FAL_KEY=

# Optional — uncomment if needed
# OPENAI_API_KEY=
# GOOGLE_GENERATIVE_AI_API_KEY=
# OPENROUTER_API_KEY=

# ============================================
# DATABASE (Canvas Persistence)
# ============================================
NEXT_PUBLIC_STORAGE_BACKEND=sqlite
SQLITE_PATH=./data/koda.db

# Turso Cloud — uncomment to use cloud DB instead of local SQLite
# TURSO_DATABASE_URL=libsql://your-db.turso.io
# TURSO_AUTH_TOKEN=your-token

# ============================================
# ASSET STORAGE (Generated Images/Videos)
# ============================================
# 'local' = ./data/generations/  |  'r2' = Cloudflare R2  |  's3' = AWS S3
ASSET_STORAGE=local
ASSET_LOCAL_PATH=./data/generations

# Cloudflare R2 — uncomment + set ASSET_STORAGE=r2
# R2_ACCOUNT_ID=
# R2_ACCESS_KEY_ID=
# R2_SECRET_ACCESS_KEY=
# R2_BUCKET_NAME=koda-assets
# R2_ENDPOINT=                    # https://{accountId}.r2.cloudflarestorage.com
# R2_PUBLIC_URL=                  # Custom domain or r2.dev URL

# AWS S3 — uncomment + set ASSET_STORAGE=s3
# S3_ACCESS_KEY_ID=
# S3_SECRET_ACCESS_KEY=
# S3_BUCKET_NAME=
# S3_REGION=us-east-1
# S3_PUBLIC_URL=                  # Optional: CloudFront URL

# ============================================
# SANDBOX (Animation Plugin)
# ============================================
# 'docker' = self-hosted  |  'e2b' = cloud (20 concurrent, 8 vCPU, 8GB RAM)
SANDBOX_PROVIDER=docker

# --- Docker settings (when SANDBOX_PROVIDER=docker) ---
# SANDBOX_MEMORY=1g
# SANDBOX_CPUS=2

# --- E2B Cloud settings (when SANDBOX_PROVIDER=e2b) ---
# Get your key at: https://e2b.dev
# E2B_API_KEY=
# E2B_TEMPLATE_ID_REMOTION=       # Build: cd templates/remotion-sandbox && npx tsx koda-remotion/build.prod.ts
# E2B_TEMPLATE_ID_THEATRE=        # Build: cd templates/sandbox && npx tsx koda-theatre/build.prod.ts
# NEXT_PUBLIC_THEATRE_ENABLED=false  # Set to 'false' to hide Theatre.js from UI (e.g. if template not built)

# ============================================
# SNAPSHOT STORAGE (Animation Code Persistence)
# ============================================
# 'local' = ./data/snapshots/  |  'r2' = Cloudflare R2 (uses R2_* vars above)
SNAPSHOT_STORAGE=local

# ============================================
# MISC
# ============================================
NPM_CONFIG_LEGACY_PEER_DEPS=true
